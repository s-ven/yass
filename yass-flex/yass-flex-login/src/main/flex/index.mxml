<?xml version="1.0" encoding="utf-8"?>
<mx:Application frameRate="20" xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" minWidth="800"
	 xmlns:main="org.yass.main.*" xmlns:component="org.yass.main.view.component.*"
	backgroundGradientAlphas="[]" backgroundImage="" backgroundAlpha="0" backgroundColor="#222222" preinitialize="onApplicationInitianize(event)" horizontalAlign="center" verticalAlign="middle">
	<mx:states>
		<mx:State name="YassApplicationLoaded">
			<mx:SetProperty target="{loginPanel}" name="visible" value="false"/>
			<mx:SetProperty target="{yassModuleLoader}" name="visible" value="true"/>
		</mx:State>
	</mx:states>
	<mx:Panel id="loginPanel" horizontalCenter="0" verticalCenter="0" horizontalAlign="center" verticalAlign="middle" width="250" paddingTop="0">
	<mx:Form horizontalCenter="0" verticalCenter="0" baseline="0" id="loginForm" width="100%" borderThickness="0" paddingTop="0" textAlign="center" paddingRight="0" paddingLeft="0">
		<mx:FormItem horizontalAlign="center" width="100%" verticalGap="0">
			<mx:Label text="Username" textAlign="center" paddingBottom="0"/>
				<mx:TextInput id="username"  editable="true" enabled="true" width="100" height="24" styleName="inputText" color="#FFFFFF" textAlign="center"/>
		</mx:FormItem>
		<mx:FormItem horizontalAlign="center" width="100%" verticalGap="0">
			<mx:Label text="Password"  textAlign="left" paddingBottom="0"/>
			<mx:TextInput id="password" displayAsPassword="true" editable="true" enabled="true" width="100" height="24" styleName="inputText" color="#FFFFFF" textAlign="center"/>
		</mx:FormItem>
		<mx:FormItem horizontalAlign="center" width="100%">
			<mx:VBox horizontalAlign="center">
				<mx:Button label="Login" click="submitLogin();" />
			</mx:VBox>
		</mx:FormItem>
	</mx:Form>
	</mx:Panel>
	<mx:ModuleLoader width="100%" height="100%" visible="false" id="yassModuleLoader" ready="onYassModuleLoaded(event);"/>
	<mx:Script>
<![CDATA[
	import mx.rpc.http.HTTPService;
	import mx.events.FlexEvent;
	import mx.controls.Alert;
	import mx.managers.SystemManager;
	import mx.controls.Label;
	import mx.core.Application;
	var loginLoader:URLLoader = new URLLoader();
	function submitLogin() {
		var loginObject:URLVariables = new URLVariables();
		loginObject.j_username = username.text;
		loginObject.j_password = password.text;
		var loginRequest:URLRequest = new URLRequest("j_security_check"); 
		loginRequest.method = "POST";
		loginRequest.data = loginObject;
		loginLoader.addEventListener(Event.COMPLETE, loginDone );
		loginLoader.load(loginRequest);
	}
	private function onApplicationInitianize(event:Event):void{
		StyleManager.loadStyleDeclarations("style.swf", true);
	}
	private function loginDone( e:Event ):void {
		loginLoader.removeEventListener(Event.COMPLETE, loginDone );
		yassModuleLoader.url = "YassApplication.swf";
		yassModuleLoader.loadModule();
	}
	private function onYassModuleLoaded(oEvent:Event):void  {
		(yassModuleLoader.child as YassApplication).setUserId(1);
		currentState = "YassApplicationLoaded";
	}
]]></mx:Script>
</mx:Application>